# AI æ•™æè½‰æ›å™¨ - å„ªåŒ–éœ€æ±‚æ¸…å–®èˆ‡å»ºè­°

**å»ºç«‹æ—¥æœŸ**: 2025-12-29  
**æœ€å¾Œæ›´æ–°**: 2025-12-29 11:25  
**ç•¶å‰ç‰ˆæœ¬**: v1.1.0

---

## ğŸ“‹ ç›®éŒ„

1. [å·²ç™¼ç¾çš„å•é¡Œ](#å·²ç™¼ç¾çš„å•é¡Œ)
2. [å„ªå…ˆç´šåˆ†é¡](#å„ªå…ˆç´šåˆ†é¡)
3. [è©³ç´°å„ªåŒ–æ–¹æ¡ˆ](#è©³ç´°å„ªåŒ–æ–¹æ¡ˆ)
4. [é¡å¤–å„ªåŒ–å»ºè­°](#é¡å¤–å„ªåŒ–å»ºè­°)
5. [å¯¦æ–½é †åºå»ºè­°](#å¯¦æ–½é †åºå»ºè­°)

---

## âŒ å·²ç™¼ç¾çš„å•é¡Œ

### ğŸ”´ é«˜å„ªå…ˆç´šå•é¡Œï¼ˆå½±éŸ¿æ ¸å¿ƒåŠŸèƒ½ï¼‰

#### 1. å¤šå±¤ç´šæ¨™é¡Œç„¡æ³•è­˜åˆ¥
**æª”æ¡ˆ**: `app/js/aiService.js` (è¡Œ 192-207)

**ç¾è±¡**:
- âœ… å¯è­˜åˆ¥: `1.`, `2.`, `3.` (ä¸€ç´šå°ç¯€)
- âŒ ç„¡æ³•è­˜åˆ¥: `1.1`, `1.2`, `2.1` (äºŒç´šå°ç¯€)
- âŒ ç„¡æ³•è­˜åˆ¥: `1.1.1`, `1.2.1` (ä¸‰ç´šå°ç¯€)
- æ‰€æœ‰æ¨™é¡Œçœ‹èµ·ä¾†éƒ½ä¸€æ¨£å¤§ï¼Œæ²’æœ‰å±¤ç´šå·®ç•°

**å½±éŸ¿**:
- æ•™æçµæ§‹æ··äº‚ï¼Œç„¡æ³•å€åˆ†ä¸»æ¬¡
- ç›®éŒ„å±¤ç´šä¸æ¸…æ™°
- é–±è®€é«”é©—å·®

**æ ¹æœ¬åŸå› **:
```javascript
// ç•¶å‰è­˜åˆ¥è¦å‰‡ (è¡Œ 192-207)
const patterns = {
    chapter: /^(ç¬¬[0-9ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å]+[ç« ç¯€]|Chapter\s+\d+)/i,
    subsubsection: /^(\d+\.\d+\.\d+)\s/,  // âœ… å·²æœ‰ä½†é †åºéŒ¯èª¤
    subsection: /^(\d+\.\d+)\s/,          // âœ… å·²æœ‰ä½†é †åºéŒ¯èª¤
    section: /^(ç¬¬[0-9ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å]+[ç¯€é …]|\d+\.\s|[A-Z]\.\s|[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å]ã€|\(\d+\))/,
    // ...
};
```

**å•é¡Œåˆ†æ**:
1. âœ… è­˜åˆ¥è¦å‰‡å·²ç¶“å­˜åœ¨ï¼ˆè¡Œ 196-198ï¼‰
2. âŒ ä½†åœ¨å¯¦éš›ä½¿ç”¨æ™‚é †åºå¯èƒ½æœ‰å•é¡Œï¼ˆè¡Œ 262-294ï¼‰
3. âœ… CSS æ¨£å¼å·²ç¶“æº–å‚™å¥½ï¼ˆ`styles.css` è¡Œ 506-527ï¼‰

**è§£æ±ºæ–¹æ¡ˆ**: 
- æª¢æŸ¥è­˜åˆ¥é †åºæ˜¯å¦æ­£ç¢ºï¼ˆå¿…é ˆå¾æœ€å…·é«”åˆ°æœ€ä¸€èˆ¬ï¼‰
- ç¢ºèª `renderPreview()` ä¸­æœ‰æ­£ç¢ºæ¸²æŸ“é€™äº›é¡å‹

---

#### 2. è¡¨æ ¼è­˜åˆ¥ä¸å®Œæ•´
**æª”æ¡ˆ**: `app/js/aiService.js` (è¡Œ 296-426)

**ç¾è±¡**:
- âœ… å¯è­˜åˆ¥: Markdown è¡¨æ ¼ (`| æ¬„ä½ |`)
- âŒ ç„¡æ³•è­˜åˆ¥: Tab åˆ†éš”çš„è¡¨æ ¼ï¼ˆWord è¤‡è£½æ ¼å¼ï¼‰

**å½±éŸ¿**:
- Word æ–‡ä»¶ä¸­çš„è¡¨æ ¼ç„¡æ³•æ­£ç¢ºé¡¯ç¤º
- è¡¨æ ¼å…§å®¹è®Šæˆæ™®é€šæ–‡å­—
- æ’ç‰ˆæ··äº‚

**æ ¹æœ¬åŸå› **:
```javascript
// Tab åˆ†éš”è¡¨æ ¼æª¢æ¸¬ (è¡Œ 296-355)
if (line.includes('\t')) {
    // å·²ç¶“æœ‰è™•ç†é‚è¼¯ï¼Œä½†å¯èƒ½æœ‰ bug
}
```

**å•é¡Œåˆ†æ**:
1. âœ… Tab åˆ†éš”è¡¨æ ¼è­˜åˆ¥é‚è¼¯å·²å­˜åœ¨ï¼ˆè¡Œ 296-355ï¼‰
2. â“ éœ€è¦æ¸¬è©¦æ˜¯å¦çœŸçš„æœ‰æ•ˆ
3. â“ å¯èƒ½éœ€è¦æ”¹é€²é‚è¼¯

**è§£æ±ºæ–¹æ¡ˆ**:
- æ¸¬è©¦ç¾æœ‰ Tab è¡¨æ ¼è­˜åˆ¥åŠŸèƒ½
- å¦‚æœç„¡æ•ˆï¼Œæ”¹é€²è­˜åˆ¥é‚è¼¯
- å¢åŠ æ›´å¤šè¡¨æ ¼æ ¼å¼æ”¯æ´

---

#### 3. é ç¢¼é¡¯ç¤ºå•é¡Œ
**æª”æ¡ˆ**: `app/js/main.js` (è¡Œ 508-529)

**ç¾è±¡**:
- ç›®éŒ„æ²’æœ‰é ç¢¼
- é å°¾æ²’æœ‰é ç¢¼

**å½±éŸ¿**:
- ç„¡æ³•å¿«é€Ÿå®šä½å…§å®¹
- åˆ—å°å¾Œä¸æ–¹ä¾¿é–±è®€

**æ ¹æœ¬åŸå› **:
```javascript
// è¨ˆç®—é ç¢¼å‡½æ•¸ (è¡Œ 508-529)
calculatePageNumbers() {
    if (!this.currentProject.structured) {
        this.showError('è«‹å…ˆé€²è¡Œ AI åˆ†æ');
        return;
    }
    
    this.currentProject.structured = this.pdfGenerator.calculatePageNumbers(
        this.currentProject.structured
    );
    
    // é‡æ–°æ¸²æŸ“é è¦½
    this.renderPreview();
    
    // å•Ÿç”¨ä¸‹è¼‰æŒ‰éˆ•
    this.elements.downloadPdfBtn.disabled = false;
    this.elements.downloadWordBtn.disabled = false;
    
    this.showSuccess('é ç¢¼è¨ˆç®—å®Œæˆï¼');
}
```

**å•é¡Œåˆ†æ**:
1. âœ… è¨ˆç®—é ç¢¼å‡½æ•¸å­˜åœ¨
2. âœ… åœ¨ç¬¬äºŒéšæ®µå®Œæˆå¾Œè‡ªå‹•è¨ˆç®—ï¼ˆè¡Œ 369-375ï¼‰
3. â“ ä½†ç›®éŒ„ä¸­å¯èƒ½æ²’æœ‰æ­£ç¢ºé¡¯ç¤º
4. â“ é å°¾é ç¢¼å¯èƒ½æ²’æœ‰æ¸²æŸ“

**è§£æ±ºæ–¹æ¡ˆ**:
- æª¢æŸ¥ `pdfGenerator.calculatePageNumbers()` å¯¦ä½œ
- ç¢ºèªç›®éŒ„æ¸²æŸ“æ™‚æœ‰é¡¯ç¤ºé ç¢¼ï¼ˆè¡Œ 419-423ï¼‰
- å¢åŠ é å°¾é ç¢¼é¡¯ç¤º

---

#### 4. ç¼ºå°‘åœ–ç‰‡é ç•™ä½ç½®æ™ºèƒ½æ’å…¥
**æª”æ¡ˆ**: `app/js/aiService.js` (è¡Œ 428-437)

**ç¾è±¡**:
- é›¢ç·šå¼•æ“æ²’æœ‰åœ–ç‰‡å»ºè­°é‚è¼¯
- åªèƒ½æ‰‹å‹•æ¨™è¨˜ `[å»ºè­°ï¼šæ’å…¥åœ–ç‰‡ï¼šæè¿°]`

**å½±éŸ¿**:
- éœ€è¦æ‰‹å‹•ç·¨è¼¯æ‰èƒ½æ’å…¥åœ–ç‰‡ä½”ä½ç¬¦
- ä¸å¤ è‡ªå‹•åŒ–

**æ ¹æœ¬åŸå› **:
```javascript
// åœ–ç‰‡æ¨™è¨˜è­˜åˆ¥ (è¡Œ 428-437)
if (line.includes('[IMAGE:') || line.includes('![åœ–ç‰‡]') || line.includes('[å»ºè­°ï¼šæ’å…¥åœ–ç‰‡')) {
    const desc = line.replace(/.*\[.*ï¼š/, '').replace(']', '');
    structured.content.push({
        type: 'image',
        description: desc || 'æ•™æåœ–ç‰‡',
        id: `img_${Date.now()}_${i}`
    });
    continue;
}
```

**å•é¡Œåˆ†æ**:
1. âœ… å¯ä»¥è­˜åˆ¥æ‰‹å‹•æ¨™è¨˜çš„åœ–ç‰‡
2. âŒ æ²’æœ‰è‡ªå‹•å»ºè­°é‚è¼¯
3. âŒ ä¸æœƒæ ¹æ“šå…§å®¹é—œéµå­—è‡ªå‹•æ’å…¥

**è§£æ±ºæ–¹æ¡ˆ**:
- å¢åŠ é—œéµå­—åŒ¹é…é‚è¼¯
- è‡ªå‹•åœ¨é©ç•¶ä½ç½®æ’å…¥åœ–ç‰‡ä½”ä½ç¬¦

---

### ğŸŸ¡ ä¸­å„ªå…ˆç´šå•é¡Œï¼ˆå½±éŸ¿ä½¿ç”¨é«”é©—ï¼‰

#### 5. ç”¨æˆ¶é«”é©—å„ªåŒ–

**5.1 é€²åº¦æç¤ºä¸å¤ æ¸…æ™°**
**æª”æ¡ˆ**: `app/js/main.js` (è¡Œ 820-847)

**ç¾è±¡**:
- ä½¿ç”¨ `alert()` é¡¯ç¤ºè¨Šæ¯ï¼Œé«”é©—å·®
- æ²’æœ‰ Toast é€šçŸ¥

**è§£æ±ºæ–¹æ¡ˆ**:
```javascript
// å»ºè­°æ”¹ç”¨ Toast é€šçŸ¥
showSuccess(message) {
    // å‰µå»º Toast å…ƒç´ 
    const toast = document.createElement('div');
    toast.className = 'toast toast-success';
    toast.textContent = message;
    document.body.appendChild(toast);
    
    // 3ç§’å¾Œè‡ªå‹•æ¶ˆå¤±
    setTimeout(() => {
        toast.remove();
    }, 3000);
}
```

---

**5.2 è¼‰å…¥ç‹€æ…‹é¡¯ç¤ºä¸å®Œæ•´**
**æª”æ¡ˆ**: `app/js/main.js` (è¡Œ 820-833)

**ç¾è±¡**:
```javascript
showLoading(message) {
    // ç°¡æ˜“å¯¦ä½œï¼šå¯ä»¥æ”¹ç”¨æ›´å¥½çš„ loading UI
    console.log('Loading:', message);
}
```

**è§£æ±ºæ–¹æ¡ˆ**:
- å¢åŠ å…¨è¢å¹• Loading é®ç½©
- é¡¯ç¤ºè¼‰å…¥å‹•ç•«å’Œè¨Šæ¯

---

**5.3 éŒ¯èª¤è™•ç†ä¸å¤ å‹å–„**

**ç¾è±¡**:
- éŒ¯èª¤è¨Šæ¯å¤ªæŠ€è¡“æ€§
- æ²’æœ‰æä¾›è§£æ±ºå»ºè­°

**è§£æ±ºæ–¹æ¡ˆ**:
- æ”¹å–„éŒ¯èª¤è¨Šæ¯æ–‡æ¡ˆ
- æä¾›å…·é«”çš„è§£æ±ºæ­¥é©Ÿ

---

#### 6. æ¨£å¼ç´°ç¯€å„ªåŒ–

**6.1 éŸ¿æ‡‰å¼è¨­è¨ˆä¸è¶³**
**æª”æ¡ˆ**: `app/css/styles.css`

**ç¾è±¡**:
- å·¦å´æ§åˆ¶é¢æ¿å›ºå®šå¯¬åº¦ 400pxï¼ˆè¡Œ 39ï¼‰
- å°è¢å¹•ä¸Šå¯èƒ½é¡¯ç¤ºä¸ä½³

**è§£æ±ºæ–¹æ¡ˆ**:
```css
/* å¢åŠ éŸ¿æ‡‰å¼æ–·é» */
@media (max-width: 1024px) {
    .control-panel {
        width: 300px;
    }
}

@media (max-width: 768px) {
    .container {
        flex-direction: column;
    }
    
    .control-panel {
        width: 100%;
        max-height: 50vh;
    }
}
```

---

**6.2 åˆ—å°æ¨£å¼å„ªåŒ–**

**ç¾è±¡**:
- åˆ—å°æ™‚å¯èƒ½æœ‰ä¸å¿…è¦çš„å…ƒç´ 
- åˆ†é æ§åˆ¶ä¸å¤ ç²¾ç¢º

**è§£æ±ºæ–¹æ¡ˆ**:
```css
/* å¢åŠ åˆ—å°å°ˆç”¨æ¨£å¼ */
@media print {
    .control-panel,
    .preview-header {
        display: none !important;
    }
    
    .preview-page {
        margin: 0;
        box-shadow: none;
        page-break-after: always;
    }
    
    /* é¿å…æ¨™é¡Œè¢«åˆ†é åˆ‡æ–· */
    .content-chapter,
    .content-section {
        page-break-after: avoid;
    }
}
```

---

### ğŸŸ¢ ä½å„ªå…ˆç´šå•é¡Œï¼ˆéŒ¦ä¸Šæ·»èŠ±ï¼‰

#### 7. åŠŸèƒ½å¢å¼·å»ºè­°

**7.1 æ”¯æ´æ›´å¤šæª”æ¡ˆæ ¼å¼**
- æ”¯æ´ `.txt` ç´”æ–‡å­—æª”
- æ”¯æ´ `.md` Markdown æª”æ¡ˆ
- æ”¯æ´ `.html` ç¶²é æª”æ¡ˆ

**7.2 å¢åŠ åŒ¯å‡ºé¸é …**
- åŒ¯å‡ºç‚º HTML
- åŒ¯å‡ºç‚º Markdown
- åŒ¯å‡ºç‚ºç´”æ–‡å­—

**7.3 å¢åŠ ç·¨è¼¯åŠŸèƒ½**
- åœ¨é è¦½é é¢ç›´æ¥ç·¨è¼¯å…§å®¹
- æ‹–æ›³èª¿æ•´åœ–ç‰‡ä½ç½®
- æ‰‹å‹•èª¿æ•´åˆ†é ä½ç½®

**7.4 å¢åŠ ç¯„æœ¬ç³»çµ±**
- é è¨­å¤šç¨®æ•™æç¯„æœ¬
- æ”¯æ´è‡ªè¨‚ç¯„æœ¬
- ç¯„æœ¬ç®¡ç†åŠŸèƒ½

---

## ğŸ¯ å„ªå…ˆç´šåˆ†é¡

### P0 - å¿…é ˆç«‹å³ä¿®å¾©ï¼ˆå½±éŸ¿æ ¸å¿ƒåŠŸèƒ½ï¼‰
1. âœ… **å¤šå±¤ç´šæ¨™é¡Œè­˜åˆ¥** - å·²æœ‰ä»£ç¢¼ï¼Œéœ€é©—è­‰
2. âœ… **è¡¨æ ¼è­˜åˆ¥** - å·²æœ‰ä»£ç¢¼ï¼Œéœ€æ¸¬è©¦
3. âš ï¸ **é ç¢¼é¡¯ç¤º** - éœ€æª¢æŸ¥å¯¦ä½œ
4. âŒ **åœ–ç‰‡æ™ºèƒ½æ’å…¥** - éœ€æ–°å¢åŠŸèƒ½

### P1 - æ‡‰è©²ç›¡å¿«å„ªåŒ–ï¼ˆå½±éŸ¿ç”¨æˆ¶é«”é©—ï¼‰
5. ç”¨æˆ¶é«”é©—å„ªåŒ–ï¼ˆToastã€Loadingã€éŒ¯èª¤è™•ç†ï¼‰
6. æ¨£å¼ç´°ç¯€å„ªåŒ–ï¼ˆéŸ¿æ‡‰å¼ã€åˆ—å°æ¨£å¼ï¼‰

### P2 - å¯ä»¥å¾ŒçºŒè€ƒæ…®ï¼ˆéŒ¦ä¸Šæ·»èŠ±ï¼‰
7. åŠŸèƒ½å¢å¼·ï¼ˆæ›´å¤šæ ¼å¼ã€åŒ¯å‡ºé¸é …ã€ç·¨è¼¯åŠŸèƒ½ã€ç¯„æœ¬ç³»çµ±ï¼‰

---

## ğŸ”§ è©³ç´°å„ªåŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ä¿®å¾©å¤šå±¤ç´šæ¨™é¡Œè­˜åˆ¥

**ç›®æ¨™**: ç¢ºä¿ 1.1ã€1.2ã€1.1.1 ç­‰å¤šå±¤ç´šæ¨™é¡Œæ­£ç¢ºè­˜åˆ¥å’Œæ¸²æŸ“

**æª¢æŸ¥æ¸…å–®**:
- [x] è­˜åˆ¥è¦å‰‡å·²å­˜åœ¨ï¼ˆ`aiService.js` è¡Œ 196-198ï¼‰
- [x] CSS æ¨£å¼å·²æº–å‚™ï¼ˆ`styles.css` è¡Œ 506-527ï¼‰
- [ ] éœ€é©—è­‰è­˜åˆ¥é †åºæ˜¯å¦æ­£ç¢º
- [ ] éœ€é©—è­‰æ¸²æŸ“é‚è¼¯æ˜¯å¦å®Œæ•´

**å¯¦æ–½æ­¥é©Ÿ**:
1. æ¸¬è©¦ç¾æœ‰åŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ
2. å¦‚æœç„¡æ•ˆï¼Œèª¿æ•´è­˜åˆ¥é †åº
3. ç¢ºèª `renderPreview()` æ­£ç¢ºè™•ç†æ‰€æœ‰é¡å‹

**é æœŸçµæœ**:
- `1.1` é¡¯ç¤ºç‚º 16pxï¼Œ3px é‚Šæ¢
- `1.1.1` é¡¯ç¤ºç‚º 15pxï¼Œ2px é‚Šæ¢
- ç›®éŒ„ä¸­æ­£ç¢ºé¡¯ç¤ºå±¤ç´šç¸®æ’

---

### æ–¹æ¡ˆ 2: æ”¹é€²è¡¨æ ¼è­˜åˆ¥

**ç›®æ¨™**: æ”¯æ´ Tab åˆ†éš”å’Œ Markdown å…©ç¨®è¡¨æ ¼æ ¼å¼

**æª¢æŸ¥æ¸…å–®**:
- [x] Tab åˆ†éš”é‚è¼¯å·²å­˜åœ¨ï¼ˆ`aiService.js` è¡Œ 296-355ï¼‰
- [x] Markdown è¡¨æ ¼é‚è¼¯å·²å­˜åœ¨ï¼ˆ`aiService.js` è¡Œ 377-426ï¼‰
- [ ] éœ€æ¸¬è©¦å¯¦éš›æ•ˆæœ
- [ ] å¯èƒ½éœ€è¦æ”¹é€²é‚Šç•Œæƒ…æ³è™•ç†

**å¯¦æ–½æ­¥é©Ÿ**:
1. æº–å‚™æ¸¬è©¦ç”¨è¡¨æ ¼ï¼ˆTab å’Œ Markdownï¼‰
2. æ¸¬è©¦ç¾æœ‰è­˜åˆ¥åŠŸèƒ½
3. ä¿®å¾©ç™¼ç¾çš„ bug
4. å¢åŠ æ›´å¤šæ ¼å¼æ”¯æ´ï¼ˆå¦‚ç©ºæ ¼å°é½Šï¼‰

**é æœŸçµæœ**:
- Word è¤‡è£½çš„è¡¨æ ¼ï¼ˆTab åˆ†éš”ï¼‰æ­£ç¢ºé¡¯ç¤º
- Markdown è¡¨æ ¼æ­£ç¢ºé¡¯ç¤º
- è¡¨æ ¼æ¨£å¼ç¾è§€ï¼ˆå·²æœ‰ CSSï¼‰

---

### æ–¹æ¡ˆ 3: ä¿®å¾©é ç¢¼è¨ˆç®—èˆ‡é¡¯ç¤º

**ç›®æ¨™**: ç›®éŒ„å’Œé å°¾éƒ½æ­£ç¢ºé¡¯ç¤ºé ç¢¼

**æª¢æŸ¥æ¸…å–®**:
- [x] è¨ˆç®—é ç¢¼å‡½æ•¸å­˜åœ¨ï¼ˆ`main.js` è¡Œ 508-529ï¼‰
- [x] è‡ªå‹•è¨ˆç®—é‚è¼¯å­˜åœ¨ï¼ˆ`main.js` è¡Œ 369-375ï¼‰
- [ ] éœ€æª¢æŸ¥ `pdfGenerator.calculatePageNumbers()` å¯¦ä½œ
- [ ] éœ€å¢åŠ é å°¾é ç¢¼é¡¯ç¤º

**å¯¦æ–½æ­¥é©Ÿ**:
1. æª¢æŸ¥ `app/js/pdfGenerator.js` çš„å¯¦ä½œ
2. ç¢ºèªé ç¢¼è¨ˆç®—é‚è¼¯æ­£ç¢º
3. åœ¨ `renderPreview()` ä¸­å¢åŠ é å°¾é ç¢¼
4. æ¸¬è©¦åˆ—å°æ™‚é ç¢¼æ˜¯å¦æ­£ç¢º

**é æœŸçµæœ**:
- ç›®éŒ„é¡¯ç¤ºæ­£ç¢ºé ç¢¼
- æ¯é åº•éƒ¨é¡¯ç¤ºé ç¢¼
- åˆ—å°æ™‚é ç¢¼æ­£ç¢º

---

### æ–¹æ¡ˆ 4: å¢åŠ åœ–ç‰‡æ™ºèƒ½æ’å…¥

**ç›®æ¨™**: æ ¹æ“šå…§å®¹é—œéµå­—è‡ªå‹•å»ºè­°æ’å…¥åœ–ç‰‡

**å¯¦æ–½æ­¥é©Ÿ**:

**æ­¥é©Ÿ 1: å®šç¾©é—œéµå­—è¦å‰‡**
```javascript
// åœ¨ aiService.js çš„ parseContentLocally() ä¸­å¢åŠ 
const imageKeywords = {
    structure: ['çµæ§‹', 'æ§‹é€ ', 'çµ„æˆ', 'å±¤æ¬¡', 'éƒ¨ä½'],
    process: ['æµç¨‹', 'æ­¥é©Ÿ', 'éç¨‹', 'æ“ä½œ', 'ç¨‹åº'],
    diagram: ['ç¤ºæ„åœ–', 'è§£å‰–åœ–', 'çµæ§‹åœ–', 'æµç¨‹åœ–', 'å°æ¯”åœ–'],
    comparison: ['æ¯”è¼ƒ', 'å°ç…§', 'å·®ç•°', 'å€åˆ¥'],
    example: ['ç¯„ä¾‹', 'æ¡ˆä¾‹', 'å¯¦ä¾‹', 'æ¨£æœ¬']
};
```

**æ­¥é©Ÿ 2: åœ¨è§£ææ™‚è‡ªå‹•æ’å…¥**
```javascript
// åœ¨æ®µè½è™•ç†é‚è¼¯ä¸­å¢åŠ æª¢æ¸¬
if (item.type === 'paragraph') {
    const text = item.text.toLowerCase();
    
    // æª¢æŸ¥æ˜¯å¦åŒ…å«åœ–ç‰‡é—œéµå­—
    for (const [category, keywords] of Object.entries(imageKeywords)) {
        if (keywords.some(keyword => text.includes(keyword))) {
            // åœ¨æ®µè½å¾Œæ’å…¥åœ–ç‰‡ä½”ä½ç¬¦
            structured.content.push({
                type: 'image',
                description: `å»ºè­°æ’å…¥${category}ç›¸é—œåœ–ç‰‡`,
                id: `img_auto_${Date.now()}_${i}`,
                auto: true  // æ¨™è¨˜ç‚ºè‡ªå‹•æ’å…¥
            });
            break;
        }
    }
}
```

**æ­¥é©Ÿ 3: æ”¯æ´æ‰‹å‹•æ¨™è¨˜ï¼ˆå·²æœ‰ï¼‰**
- ä¿ç•™ç¾æœ‰çš„ `[å»ºè­°ï¼šæ’å…¥åœ–ç‰‡ï¼šæè¿°]` èªæ³•
- å„ªå…ˆä½¿ç”¨æ‰‹å‹•æ¨™è¨˜

**é æœŸçµæœ**:
- é‡åˆ°ã€Œçš®è†šçµæ§‹ã€è‡ªå‹•æ’å…¥åœ–ç‰‡ä½”ä½ç¬¦
- é‡åˆ°ã€Œæ“ä½œæµç¨‹ã€è‡ªå‹•æ’å…¥åœ–ç‰‡ä½”ä½ç¬¦
- æ‰‹å‹•æ¨™è¨˜å„ªå…ˆæ–¼è‡ªå‹•æ’å…¥

---

### æ–¹æ¡ˆ 5: ç”¨æˆ¶é«”é©—å„ªåŒ–

**5.1 Toast é€šçŸ¥ç³»çµ±**

**æ–°å¢æª”æ¡ˆ**: `app/js/toast.js`
```javascript
class Toast {
    static show(message, type = 'info', duration = 3000) {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.innerHTML = `
            <span class="toast-icon">${this.getIcon(type)}</span>
            <span class="toast-message">${message}</span>
        `;
        
        document.body.appendChild(toast);
        
        // è§¸ç™¼å‹•ç•«
        setTimeout(() => toast.classList.add('show'), 10);
        
        // è‡ªå‹•æ¶ˆå¤±
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => toast.remove(), 300);
        }, duration);
    }
    
    static getIcon(type) {
        const icons = {
            success: 'âœ…',
            error: 'âŒ',
            warning: 'âš ï¸',
            info: 'â„¹ï¸'
        };
        return icons[type] || icons.info;
    }
}
```

**æ–°å¢ CSS**: `app/css/styles.css`
```css
/* Toast é€šçŸ¥ */
.toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background: white;
    padding: 16px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    gap: 12px;
    transform: translateX(400px);
    transition: transform 0.3s ease;
    z-index: 9999;
}

.toast.show {
    transform: translateX(0);
}

.toast-success {
    border-left: 4px solid #16a34a;
}

.toast-error {
    border-left: 4px solid #dc2626;
}

.toast-warning {
    border-left: 4px solid #ea580c;
}

.toast-info {
    border-left: 4px solid #2563eb;
}
```

**ä¿®æ”¹ `main.js`**:
```javascript
showSuccess(message) {
    Toast.show(message, 'success');
}

showError(message) {
    Toast.show(message, 'error');
}
```

---

**5.2 Loading é®ç½©**

**æ–°å¢ HTML**: `app/index.html`
```html
<!-- Loading é®ç½© -->
<div id="loading-overlay" class="loading-overlay hidden">
    <div class="loading-spinner"></div>
    <p class="loading-text">è¼‰å…¥ä¸­...</p>
</div>
```

**æ–°å¢ CSS**: `app/css/styles.css`
```css
/* Loading é®ç½© */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10000;
}

.loading-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-text {
    margin-top: 20px;
    color: white;
    font-size: 18px;
}
```

**ä¿®æ”¹ `main.js`**:
```javascript
showLoading(message) {
    const overlay = document.getElementById('loading-overlay');
    const text = overlay.querySelector('.loading-text');
    text.textContent = message;
    overlay.classList.remove('hidden');
}

hideLoading() {
    const overlay = document.getElementById('loading-overlay');
    overlay.classList.add('hidden');
}
```

---

## ğŸ’¡ é¡å¤–å„ªåŒ–å»ºè­°

### å»ºè­° 1: å¢åŠ  Demo æŒ‰éˆ•

**ç›®çš„**: è®“æ–°ç”¨æˆ¶å¿«é€Ÿé«”é©—åŠŸèƒ½

**å¯¦æ–½**:
```html
<!-- åœ¨ä¸Šå‚³å€åŸŸå¢åŠ  Demo æŒ‰éˆ• -->
<button id="load-demo-btn" class="btn-text">
    ğŸš€ è¼‰å…¥æ¼”ç¤ºæ•™æ (Demo)
</button>
```

```javascript
// åœ¨ main.js ä¸­å¢åŠ 
elements.loadDemoBtn.addEventListener('click', () => {
    this.currentProject.rawContent = '# æ¸¬è©¦æ•™æDEMO\n\n...';
    this.handleAIAnalysis();
});
```

---

### å»ºè­° 2: å¢åŠ å¿«æ·éµ

**å¯¦æ–½**:
```javascript
// åœ¨ main.js çš„ init() ä¸­å¢åŠ 
document.addEventListener('keydown', (e) => {
    // Ctrl/Cmd + S: å„²å­˜å°ˆæ¡ˆ
    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        this.saveProject();
    }
    
    // Ctrl/Cmd + P: ä¸‹è¼‰ PDF
    if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
        e.preventDefault();
        this.downloadPDF();
    }
});
```

---

### å»ºè­° 3: å¢åŠ æ’¤éŠ·/é‡åšåŠŸèƒ½

**ç›®çš„**: è®“ç”¨æˆ¶å¯ä»¥æ’¤éŠ·ç·¨è¼¯æ“ä½œ

**å¯¦æ–½**:
```javascript
class HistoryManager {
    constructor() {
        this.history = [];
        this.currentIndex = -1;
    }
    
    push(state) {
        // ç§»é™¤ç•¶å‰ä½ç½®ä¹‹å¾Œçš„æ­·å²
        this.history = this.history.slice(0, this.currentIndex + 1);
        this.history.push(JSON.parse(JSON.stringify(state)));
        this.currentIndex++;
    }
    
    undo() {
        if (this.currentIndex > 0) {
            this.currentIndex--;
            return this.history[this.currentIndex];
        }
        return null;
    }
    
    redo() {
        if (this.currentIndex < this.history.length - 1) {
            this.currentIndex++;
            return this.history[this.currentIndex];
        }
        return null;
    }
}
```

---

### å»ºè­° 4: å¢åŠ åŒ¯å‡ºè¨­å®š

**ç›®çš„**: è®“ç”¨æˆ¶è‡ªè¨‚åŒ¯å‡ºé¸é …

**å¯¦æ–½**:
```html
<!-- åŒ¯å‡ºè¨­å®šå°è©±æ¡† -->
<div id="export-settings-modal" class="modal hidden">
    <div class="modal-content">
        <h2>åŒ¯å‡ºè¨­å®š</h2>
        
        <label>
            <input type="checkbox" id="include-toc" checked>
            åŒ…å«ç›®éŒ„
        </label>
        
        <label>
            <input type="checkbox" id="include-page-numbers" checked>
            åŒ…å«é ç¢¼
        </label>
        
        <label>
            <input type="checkbox" id="include-images" checked>
            åŒ…å«åœ–ç‰‡
        </label>
        
        <div class="modal-buttons">
            <button class="btn-secondary" id="export-cancel">å–æ¶ˆ</button>
            <button class="btn-primary" id="export-confirm">ç¢ºèªåŒ¯å‡º</button>
        </div>
    </div>
</div>
```

---

## ğŸ“… å¯¦æ–½é †åºå»ºè­°

### ç¬¬ä¸€éšæ®µï¼šæ ¸å¿ƒåŠŸèƒ½ä¿®å¾©ï¼ˆ1-2 å¤©ï¼‰
1. âœ… é©—è­‰å¤šå±¤ç´šæ¨™é¡Œè­˜åˆ¥ï¼ˆ0.5 å¤©ï¼‰
2. âœ… æ¸¬è©¦ä¸¦ä¿®å¾©è¡¨æ ¼è­˜åˆ¥ï¼ˆ0.5 å¤©ï¼‰
3. âš ï¸ æª¢æŸ¥ä¸¦ä¿®å¾©é ç¢¼é¡¯ç¤ºï¼ˆ0.5 å¤©ï¼‰
4. âŒ å¢åŠ åœ–ç‰‡æ™ºèƒ½æ’å…¥ï¼ˆ0.5 å¤©ï¼‰

**é æœŸæˆæœ**: æ ¸å¿ƒæ’ç‰ˆåŠŸèƒ½å®Œå…¨æ­£å¸¸

---

### ç¬¬äºŒéšæ®µï¼šç”¨æˆ¶é«”é©—å„ªåŒ–ï¼ˆ1 å¤©ï¼‰
1. å¯¦ä½œ Toast é€šçŸ¥ç³»çµ±ï¼ˆ0.3 å¤©ï¼‰
2. å¯¦ä½œ Loading é®ç½©ï¼ˆ0.2 å¤©ï¼‰
3. æ”¹å–„éŒ¯èª¤è™•ç†ï¼ˆ0.2 å¤©ï¼‰
4. å¢åŠ éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆ0.3 å¤©ï¼‰

**é æœŸæˆæœ**: ä½¿ç”¨é«”é©—å¤§å¹…æå‡

---

### ç¬¬ä¸‰éšæ®µï¼šåŠŸèƒ½å¢å¼·ï¼ˆå¯é¸ï¼Œ1-2 å¤©ï¼‰
1. å¢åŠ  Demo æŒ‰éˆ•ï¼ˆ0.2 å¤©ï¼‰
2. å¢åŠ å¿«æ·éµï¼ˆ0.2 å¤©ï¼‰
3. å¢åŠ æ’¤éŠ·/é‡åšï¼ˆ0.5 å¤©ï¼‰
4. å¢åŠ åŒ¯å‡ºè¨­å®šï¼ˆ0.3 å¤©ï¼‰
5. å¢åŠ æ›´å¤šæª”æ¡ˆæ ¼å¼æ”¯æ´ï¼ˆ0.5 å¤©ï¼‰

**é æœŸæˆæœ**: åŠŸèƒ½æ›´åŠ å®Œå–„

---

## ğŸ¯ ç¸½çµ

### å¿…é ˆä¿®å¾©çš„å•é¡Œï¼ˆP0ï¼‰
1. âœ… å¤šå±¤ç´šæ¨™é¡Œè­˜åˆ¥ï¼ˆå·²æœ‰ä»£ç¢¼ï¼Œéœ€é©—è­‰ï¼‰
2. âœ… è¡¨æ ¼è­˜åˆ¥ï¼ˆå·²æœ‰ä»£ç¢¼ï¼Œéœ€æ¸¬è©¦ï¼‰
3. âš ï¸ é ç¢¼é¡¯ç¤ºï¼ˆéœ€æª¢æŸ¥å¯¦ä½œï¼‰
4. âŒ åœ–ç‰‡æ™ºèƒ½æ’å…¥ï¼ˆéœ€æ–°å¢åŠŸèƒ½ï¼‰

### å»ºè­°å„ªåŒ–çš„é …ç›®ï¼ˆP1ï¼‰
5. ç”¨æˆ¶é«”é©—å„ªåŒ–ï¼ˆToastã€Loadingã€éŒ¯èª¤è™•ç†ï¼‰
6. æ¨£å¼ç´°ç¯€å„ªåŒ–ï¼ˆéŸ¿æ‡‰å¼ã€åˆ—å°æ¨£å¼ï¼‰

### å¯é¸å¢å¼·åŠŸèƒ½ï¼ˆP2ï¼‰
7. Demo æŒ‰éˆ•ã€å¿«æ·éµã€æ’¤éŠ·/é‡åšã€åŒ¯å‡ºè¨­å®š

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡Œå‹•

è«‹ç¢ºèªï¼š
1. æ˜¯å¦åŒæ„é€™å€‹å„ªå…ˆç´šæ’åºï¼Ÿ
2. æƒ³å¾å“ªå€‹éšæ®µé–‹å§‹å¯¦æ–½ï¼Ÿ
3. æ˜¯å¦æœ‰å…¶ä»–éœ€æ±‚æˆ–å»ºè­°ï¼Ÿ

æˆ‘å¯ä»¥ç«‹å³é–‹å§‹å¯¦æ–½ä»»ä½•ä½ é¸æ“‡çš„å„ªåŒ–é …ç›®ï¼

---

**æ–‡ä»¶çµæŸ**

*æœ¬æ–‡ä»¶è©³ç´°åˆ—å‡ºäº† AI æ•™æè½‰æ›å™¨çš„æ‰€æœ‰å„ªåŒ–éœ€æ±‚ã€å•é¡Œåˆ†æã€è§£æ±ºæ–¹æ¡ˆå’Œå¯¦æ–½å»ºè­°ã€‚*
